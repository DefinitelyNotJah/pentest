const http = require('http');
const conditions = ["email", "password", "username"]

if (process.argv.length <= 2 || conditions.includes(process.argv[2].toLowerCase())) {
	console.log("Usage: node search.js <email/password/username> <keyword>");
	console.log("Usage: node search.js email hey123@gmail.com");
	process.exit(-1);
}
var type = process.argv[2];
var keyword = process.argv[3];

console.log(`Searching for ${type} ${keyword}...`)
fetch(`https://scylla.so/search?q=${type}:${keyword}`)
.then(response => response.json())
.then(data => {
	if(data.length > 0) {
		console.log(`Found ${data.length} results`)
	  	data.forEach( (e, i) => {
  			console.log(`${i}. ${e["fields"].email || e["fields"].name}:${e["fields"].password}`)
  		})
  	} else {
  		console.log(`Found nothing :(`)
  	}
});
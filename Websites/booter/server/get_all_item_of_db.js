app.get('/app/api/control/users', async (req, res, next) => {
	const { query } = req;
	const { token } = query;

	await UserSessionSchema.find({
		userToken : token,
		isDeleted : false
	}, (err, sessions) => {
		if(err)
		{
			return res.send({
				success: false,
				message: 'Server Error, please try again later.'
			});
		}
		const user = sessions[0];
		if(sessions.length != 1)
		{
			return res.send({
				success: false,
				message: 'Invalid Session.'
			});
		}
		else
		{
			UserSchema.find({
				userID : user.userID
			}, (err, SeasonLL) => {
				if(err)
				{
					return res.send({
						success: false,
						message: 'Server Error, please try again later.'
					});
				}
				if(SeasonLL.length != 1)
				{
					return res.send({
						success: false,
						message: 'Invalid User.'
					});
				}
				else
				{
					( async () => {
						var userArrayLoading = []
						await UserSchema.find({}, async (err, result) =>{
							for( var i = 0 ; i < result.length ; i++ )
							{
								const users2 = result[i]
								userArrayLoading.push({
									userName : users2.userID,
									userEmail : users2.email,
									userDate : users2.signUpDate,
									userBal : users2.MoneyBal,
									userServ : users2.AssignedServer,
									userMethods : users2.AssignedMethods,
									userL7logs : users2.Atklogs
								})
							}
							return res.send({
								success: true,
								message: 'Got all information',
								UserArray : userArrayLoading
							})
						});
					})(); 
				}
			});
		}
	});
});
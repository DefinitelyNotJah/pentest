import React, { Component } from 'react';
import { withStyles } from '@material-ui/core/styles';
import Paper from '@material-ui/core/Paper';
import Table from '@material-ui/core/Table';
import TableBody from '@material-ui/core/TableBody';
import TableCell from '@material-ui/core/TableCell';
import TableHead from '@material-ui/core/TableHead';
import TableRow from '@material-ui/core/TableRow';
import Typography from '@material-ui/core/Typography';
import Breadcrumbs from '@material-ui/core/Breadcrumbs';
import Divider from '@material-ui/core/Divider';
import Grid from '@material-ui/core/Grid';
import Settings from './settings.json';
import Button from '@material-ui/core/Button';

const useStyles = (theme) => ({
	paperX1: {
		overflowX: 'auto',
		height: theme.spacing(50),
		width: '100%',
	},
	table: {
		minWidth: 650,
		maxWidth: '100%',
	},
	styleButton: {
		width: theme.spacing(20),
		marginLeft: '1rem',
	}
});

class MethodLayer7 extends Component {
	constructor(props)
	{
		super(props);
		this.state = {
			MethodInfo: []
		}
	}
	componentDidMount()
	{
		var token = this.props.token;
		fetch(Settings.BACKEND_SERVER + 'app/api/managemethods?token=' + token)
		.then(res => res.json())
		.then(json => {
			if(json.success)
			{
				this.setState({
					MethodInfo : json.MethodInfo
				});
			}
		});
	}
	render () {
		const {
			MethodInfo
		} = this.state;
		const { classes }  = this.props;
		return (
			<div>
				<div 
					style={{ 
						marginBottom: '1rem'
					}}
				>
					<Breadcrumbs aria-label="breadcrumb">
						<Typography color="inherit">Home</Typography>
						<Typography color="inherit">Manage Methods</Typography>
						<Typography color="textPrimary">Layer 7</Typography>
					</Breadcrumbs>
				</div>
				<Divider />
				<div
					style={{
						marginBottom: '1rem'
					}}
				>
					<Paper
						className={classes.paperX1}
					>
						<Grid item xs={12}>
							<Table className={classes.table}>
								<TableHead>
									<TableRow>
										<TableCell>Method Name</TableCell>
										<TableCell>Language</TableCell>
										<TableCell>Type</TableCell>
										<TableCell align="right">Minimum Power</TableCell>
										<TableCell align="right">Bypass</TableCell>
									</TableRow>
								</TableHead>
								<TableBody>
									{MethodInfo.map((option) => (
									<TableRow key={option}>
										<TableCell component="th" scope="row">
											{option.MethodName}
										</TableCell>
										<TableCell>{option.MethodType}</TableCell>
										<TableCell>Layer 7</TableCell>
										<TableCell align="right">Power</TableCell>
										<TableCell align="right">Bypass</TableCell>
									</TableRow>
									))}
								</TableBody>
							</Table>
						</Grid>
					</Paper>
				</div>
				<div
					style={{
						marginRight: '1rem',
						height: '100%',
						width: '100%',
						display: 'flex',
						justifyContent: 'flex-end'
					}}
				>
					<Button className={classes.styleButton} variant="contained" color="primary">
						Add
					</Button>
					<Button className={classes.styleButton} variant="contained" color="primary">
						Purchase
					</Button>
				</div>
			</div>
		)
	};
}

export default withStyles(useStyles)(MethodLayer7);